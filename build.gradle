buildscript {
    repositories {
        mavenLocal()
        maven { url "https://repo.grails.org/grails/core" }
    }
    dependencies {
        classpath "org.grails:grails-gradle-plugin:$grailsVersion"
        classpath 'org.kt3k.gradle.plugin:coveralls-gradle-plugin:2.4.0'
        classpath 'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.7.3'
        classpath "net.saliman:gradle-cobertura-plugin:2.4.0"
    }
}

plugins {
    id 'com.github.kt3k.coveralls' version '2.7.1'
}


version "3.X"
group "org.grails.plugins"

apply plugin: 'eclipse'
apply plugin: 'idea'
apply plugin: "org.grails.grails-plugin"
apply plugin:"org.grails.grails-plugin-publish"
apply plugin: "org.grails.grails-gsp"
apply plugin: 'com.github.kt3k.coveralls'
apply plugin: "net.saliman.cobertura"


sourceCompatibility = 1.7
targetCompatibility = 1.7

cobertura.coverageFormats = ['html', 'xml']

repositories {
    mavenLocal()
    mavenCentral()
    maven { url "https://repo.grails.org/grails/core" }
}

dependencyManagement {
    imports {
        mavenBom "org.grails:grails-bom:$grailsVersion"
    }
    applyMavenExclusions false
}

dependencies {
    provided 'org.springframework.boot:spring-boot-starter-logging'
    provided "org.springframework.boot:spring-boot-starter-actuator"
    provided "org.springframework.boot:spring-boot-autoconfigure"
    provided "org.springframework.boot:spring-boot-starter-tomcat"

    compile "org.grails:grails-core"
    compile "org.grails:grails-web-boot"
    compile "org.grails:grails-dependencies"
    profile "org.grails.profiles:web-plugin"
    provided "org.grails:grails-plugin-services"
    provided "org.grails:grails-plugin-domain-class"

    compile "org.grails:grails-datastore-rest-client:6.0.5.RELEASE"

    testCompile "org.grails:grails-plugin-testing"

    console "org.grails:grails-console"
}

task wrapper(type: Wrapper) {
    gradleVersion = gradleWrapperVersion
}

bintray {
    user = project.hasProperty('bintray_user') ? project.bintray_user : System.getenv('bintray_user')
    key = project.hasProperty('bintray_key') ? project.bintray_key : System.getenv('bintray_key')

    publish = true
    pkg {
        userOrg = ''
        repo = "plugins"
        name = project.name
        desc = "Grails 3 ReCaptcha plugin"
        websiteUrl = "https://github.com/iamthechad/grails3-recaptcha"
        issueTrackerUrl = "https://github.com/iamthechad/grails3-recaptcha/issues"
        vcsUrl = "https://github.com/iamthechad/grails3-recaptcha.git"
        licenses = ["Apache-2.0"]
        labels = ["recaptcha"]
        publicDownloadNumbers = true
    }
}
